<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Equipment Form</title>

  <link rel="icon" type="image/png" href="favicon.png">
  <!-- Styles -->
  <link rel="stylesheet" href="header.css?v=1.0.7">
  <link rel="stylesheet" href="styles.css?v=1.0.7">
</head>

<body>
  <div id="toast" class="toast"></div>

  <!-- Dynamic Header Placeholder -->
  <div id="main-header"></div>

  <script src="header.js?v=1.0.7"></script>
  <!-- Controls Row -->
  <div class="container main-controls">
    <button class="equipment-requests-btn flex-item" id="equipmentRequestsBtn" onclick="submitEquipmentRequests()">
      Requests
    </button>
    <div id="name-or-history" class="flex-item">
      <div class="form-group main-name-group" style="margin-bottom: 0;">
        <input type="text" id="mainSenderName" placeholder="Your Name" autocomplete="off">
      </div>
    </div>
  </div>

  <!-- Categories & items -->
  <div class="container" id="app"></div>

  <!-- Simple Search Section -->
  <div class="container">
    <div style="background: white; border-radius: 12px; padding: 20px; margin-top: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
      <h3 style="margin: 0 0 12px 0; font-size: 18px; color: #1f2937;">üîç Search Materials</h3>
      <input type="text" id="searchInput" placeholder="Type to search..." style="width: 100%; padding: 10px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px;">
      <div id="searchResults" style="margin-top: 12px; display: none;"></div>
    </div>
  </div>

  <!-- Floating submit button -->
  <button class="submit" id="submitBtn" onclick="submitAll()">
    <span class="btn-text">Submit</span>
    <span class="spinner"></span>
  </button>


  <!-- Equipment/Materials requests modal -->
  <div class="modal" id="requestsModal" onclick="overlayCloseRequests(event)">
    <div class="modal-content" onclick="event.stopPropagation()">
      <div class="modal-title">Equipment/Materials Request</div>

      <div class="form-group">
        <label for="materialSelect">Select Equipment/Material:</label>
        <select id="materialSelect" class="material-select">
          <option value="">Select from list...</option>
          <option value="custom">Enter custom material...</option>
        </select>
      </div>

      <div class="form-group" id="customMaterialGroup" style="display: none;">
        <label for="materialInput">Custom Material:</label>
        <input type="text" id="materialInput" placeholder="Enter custom material..." autocomplete="off">
      </div>

      <div class="modal-buttons">
        <button type="button" class="cancel-btn" onclick="closeRequestsModal()">Cancel</button>
        <button type="button" class="send-btn" id="sendRequestsBtn" onclick="sendRequestWithDetails()">Send
          Request</button>
      </div>
    </div>
  </div>

  <!-- Quantity modal -->
  <div class="modal" id="modal" onclick="overlayClose(event)">
    <div class="modal-content" onclick="event.stopPropagation()">
      <div class="modal-title" id="modalTitle"></div>

      <div class="qty-control">
        <button type="button" onclick="changeQty(-1)">‚àí</button>
        <input type="number" id="qty" min="0" max="99999" maxlength="5" inputmode="numeric" autocomplete="off" />

        <button type="button" onclick="changeQty(1)">+</button>
      </div>

      <div class="presets">
        <div class="preset">1</div>
        <div class="preset">3</div>
        <div class="preset">5</div>
      </div>
    </div>
  </div>

  <!-- History Modal -->
  <div class="modal" id="historyModal" onclick="overlayCloseHistory(event)">
    <div class="modal-content" onclick="event.stopPropagation()">
      <div class="modal-title history-title-row">
        <span id="historyTitleText">Local History (Device)</span>
        <button class="edit-name-btn" onclick="toggleEditName()" title="Edit Name">‚úé</button>
      </div>
      <div id="editNameContainer" style="display: none; margin-bottom: 15px;">
        <input type="text" id="editSenderName" class="edit-name-input" placeholder="Enter new name...">
      </div>
      <div id="historyList" class="history-list">
        <p style="text-align: center; color: #6b7280; padding: 20px;">No history records found.</p>
      </div>
      <div class="modal-buttons">
        <button type="button" class="cancel-btn" onclick="closeHistoryModal()">Close</button>
      </div>
    </div>
  </div>

  <!-- App logic -->
  <script src="app.js?v=1.0.7"></script>
</body>

</html>